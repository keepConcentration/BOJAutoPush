import java.io.*;interface Main{static void main(String[]z)throws Exception{BufferedReader b=new BufferedReader(new InputStreamReader(System.in));String[]w=b.readLine().split(" ");int x=Integer.parseInt(w[0]),y=Integer.parseInt(w[1]),r=64;boolean[][]a=new boolean[x][y];for(int i=0;i<x;++i){String[]o=b.readLine().split("");for(int j=0;j<y;++j){a[i][j]=o[j].equals("W")?true:false;}}for(int i=0;i<x-7;++i){for(int j=0;j<y-7;++j){int c=0;boolean p=a[i][j];for(int k=i;k<i+8;++k){for(int l=j;l<j+8;++l){c+=p!=a[k][l]?1:0;p=!p;}p=!p;}c=c>64-c?64-c:c;r=r>c?c:r;}}System.out.print(r);}}